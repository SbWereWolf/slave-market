# Тестовое задание "Биржа рабов" (Древнее HR агентство)

## Описание биржи

Биржа рабов позволяет покупать или брать в аренду рабов для различных задач:

+ земледелие;
+ скотоводство;
+ работа по дому (уборка, приготовление пищи);
+ работа в каменоломне
+ и др.

Оплата производится золотом.

Для удобства клиентов весь ассортимент разбит по категориям, например:

> Популярное -> Для кухни -> Мытьё посуды

Раб может находиться в нескольких категориях одновременно.

Для описания рабов используются характеристики:

+ Кличка;
+ Пол;
+ Возраст;
+ Вес;
+ Цвет кожи;
+ Где пойман/выращен;
+ Описание и повадки (например, любит играть с собакой);
+ Ставка почасовой аренды;
+ Стоимость.

## Задание №2. Спроектировать схему БД и написать запросы

**Цель задания** - выяснить уровень владения SQL и знания по устройству БД.

**Нужны только SQL запросы, никакой визуализации!**

Спроектировать структуру базы данных и оптимизировать для работы следующих выборок:

+ Получить минимальную, максимальную и среднюю стоимость всех рабов весом более 60 кг.
+ Выбрать категории, в которых больше 10 рабов.
+ Выбрать категорию с наибольшей суммарной стоимостью рабов.
+ Выбрать категории, в которых мужчин больше чем женщин.
+ Количество рабов в категории "Для кухни" (включая все вложенные категории).

Можно использовать любую реляционную СУБД, например, MySQL или PostgreSQL.

## Решение

**СУБД** - PostgreSQL

**Модель данных** - Entity Value Attribute

Порядок выполнения скриптов :

+ install.sql
+ catalog_data_insertion.sql
+ task_solution.sql
+ uninstall.sql

Целью задания является "выяснить уровень владения SQL", поэтому задача "проектирование БД под оптимизацию выполнения запросов" проигнорирована.

Для оптимизации : была бы это одна табличка в которой было бы сразу всё и сразу бы на всё были индексы, разве что справочник полов был бы отдельно.

EVA-модель было не сложно использовать потому, что реализация уже была [Универсальный каталог](https://github.com/SbWereWolf/universal_data_catalog_idea) - [Статья на Хабре](https://habrahabr.ru/post/323498/)
